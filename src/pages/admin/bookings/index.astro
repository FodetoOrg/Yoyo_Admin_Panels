---
import DashboardLayout from "../../../layouts/DashboardLayout.astro";
import Screen from "./_components/screen";
import { mockBookings } from "../../../lib/mock-data";
import { UserRole } from "@/lib/utils/auth";

// Check if user has permission (middleware already authenticated)
const currentUser = Astro.locals.user;
if (!currentUser || (currentUser.role !== UserRole.SUPER_ADMIN && currentUser.role !== UserRole.HOTEL_ADMIN)) {
  return Astro.redirect('/admin/dashboard');
}

// Mock API call - replace with actual API call
const bookings = mockBookings;
---

<DashboardLayout title="Bookings">
  <Screen bookings={bookings} client:load />
</DashboardLayout>