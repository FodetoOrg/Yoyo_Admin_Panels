---
import Layout from '../_layout.astro';
import NotFound from "@/components/NotFound";
---

<Layout title="Dashboard">
  <div id="hotels-content">
    <NotFound 
      title="Access Denied"
      description="This page is only available to super administrators."
      pageRedirect="/admin/dashboard"
      pageRedirectText="Go to Dashboard"
    />
  </div>
</Layout>

<script>
  // Check user role and view-as context
  const currentUser = { role: "super_admin" }; // This should come from auth
  const viewAsHotel = localStorage.getItem("viewAsHotel");
  const effectiveRole = viewAsHotel && currentUser.role === "super_admin" ? "hotel_admin" : currentUser.role;
  
  // Only show hotels dashboard for super admin (not when viewing as hotel admin)
  if (effectiveRole === "super_admin") {
    // Load the actual hotels dashboard
    const content = document.getElementById("hotels-content");
    if (content) {
      content.innerHTML = `
        <div class="space-y-4">
          <div class="text-lg font-semibold">Hotels Dashboard</div>
          <p class="text-muted-foreground">Select a hotel to view detailed analytics</p>
          <!-- Hotel selector and dashboard would be mounted here -->
        </div>
      `;
    }
  }
</script>