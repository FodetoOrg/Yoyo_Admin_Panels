---
import DashboardLayout from "../../../layouts/DashboardLayout.astro";
import Screen from "./_components/screen";
import { UserRole } from "@/lib/utils/auth";

// Check if user has permission (middleware already authenticated)
const currentUser = Astro.locals.user;
if (!currentUser || currentUser.role !== UserRole.SUPER_ADMIN) {
  return Astro.redirect('/admin/dashboard');
}

// Mock data - replace with actual API call
const mockRoomTypes = [
  {
    id: "rt_001",
    name: "Standard Room",
    description: "Basic room with essential amenities",
    basePrice: 100,
    maxOccupancy: 2,
    amenities: ["wifi", "ac_heating", "tv"],
    status: "active",
    createdAt: new Date("2023-01-15"),
    updatedAt: new Date("2023-06-20"),
  },
  {
    id: "rt_002", 
    name: "Deluxe Room",
    description: "Spacious room with premium amenities",
    basePrice: 150,
    maxOccupancy: 3,
    amenities: ["wifi", "ac_heating", "tv", "minibar", "balcony"],
    status: "active",
    createdAt: new Date("2023-02-10"),
    updatedAt: new Date("2023-06-25"),
  },
  {
    id: "rt_003",
    name: "Suite",
    description: "Luxury suite with separate living area",
    basePrice: 300,
    maxOccupancy: 4,
    amenities: ["wifi", "ac_heating", "tv", "minibar", "balcony", "spa", "safe"],
    status: "active",
    createdAt: new Date("2023-03-05"),
    updatedAt: new Date("2023-07-01"),
  },
];
---

<DashboardLayout title="Room Types">
  <Screen roomTypes={mockRoomTypes} client:load />
</DashboardLayout>